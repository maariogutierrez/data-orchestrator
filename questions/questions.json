{
    "common": {
        "Number of trips": {"query": {"size": 0, "track_total_hits": true}},
        "Trips per vendor": {"query": {"size": 0, "aggs": {"trips_per_vendor": {"terms": {"field": "VendorID"}}}}},
        "Trips per payment type": {"query": {"size": 0, "aggs": {"trips_per_payment": {"terms": {"field": "payment_type"}}}}},
        "Average trip distance": {"query": {"size": 0, "aggs": {"avg_distance": {"avg": {"field": "trip_distance"}}}}},
        "Total revenue": {"query": {"size": 0, "aggs": {"total_revenue": {"sum": {"field": "total_amount"}}}}},
        "Average passengers per trip": {"query": {"size": 0, "aggs": {"avg_passengers": {"avg": {"field": "passenger_count"}}}}}
    },
    "uncommon": {
        "Average trip duration": {"query": {"size":0,"aggs":{"avg_trip_duration":{"avg":{"script":{"source":"def fmt = java.time.format.DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\"); def start = java.time.LocalDateTime.parse(doc['tpep_pickup_datetime.keyword'].value, fmt); def end = java.time.LocalDateTime.parse(doc['tpep_dropoff_datetime.keyword'].value, fmt); return java.time.Duration.between(start, end).toMinutes();"}}}}}},
        "Trips per pickup location": {"query": {"size":0,"aggs":{"trips_per_pu":{"terms":{"field":"PULocationID","size":10}}}}},
        "Average tip per payment type": {"query":{"size":0,"aggs":{"avg_tip_payment":{"terms":{"field":"payment_type","size":10},"aggs":{"avg_tip":{"avg":{"field":"tip_amount"}}}}}}},
        "Revenue per vendor": {"query": {"size": 0, "aggs": {"revenue_vendor": {"terms": {"field": "VendorID"}, "aggs": {"total_revenue": {"sum": {"field": "total_amount"}}}}}}}
    }
}